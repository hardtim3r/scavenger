<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <title>Scavenger Hunt – Belminuten</title>
  <!-- Zoom uit/in uitschakelen + double-tap zo veel mogelijk voorkomen -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no" />
  <style>
    :root {
      color-scheme: dark;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;         /* geen scroll */
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #050814;
      color: #f7f7ff;
      display: flex;
      align-items: center;
      justify-content: center;
      box-sizing: border-box;
      touch-action: none;       /* geen pinch/double-tap zoom */
    }

    .wrapper {
      max-width: 480px;
      width: calc(100vw - 32px); /* beetje marge links/rechts op kleine schermen */
      text-align: center;
      opacity: 0;
      transform: translateY(8px);
      transition: opacity 0.4s ease, transform 0.4s ease;
    }

    .card {
      background: rgba(15, 18, 40, 0.92);
      border-radius: 24px;
      padding: 24px 22px 24px;
      box-shadow: 0 18px 60px rgba(0,0,0,0.6);
      backdrop-filter: blur(12px);
      transition: background 0.4s ease, box-shadow 0.4s ease, transform 0.4s ease;
    }

    .card.calling {
      background: radial-gradient(circle at top, rgba(107,255,181,0.12), rgba(15,18,40,0.98));
      box-shadow: 0 24px 70px rgba(0,0,0,0.9);
      transform: translateY(-2px);
    }

    .header {
      font-size: 0.85rem;
      opacity: 0.7;
      margin-bottom: 6px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .contact-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin-bottom: 18px;
      cursor: pointer; /* voor dev-tap */
    }

    .contact-avatar {
      width: 42px;
      height: 42px;
      border-radius: 999px;
      background: radial-gradient(circle at top, rgba(255,255,255,0.18), rgba(10,12,30,0.95));
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 1.1rem;
      box-shadow: 0 8px 24px rgba(0,0,0,0.6);
    }

    .contact-meta {
      text-align: left;
    }

    .contact-name {
      font-size: 1.25rem;
      font-weight: 600;
      line-height: 1.2;
    }

    .contact-sub {
      font-size: 0.8rem;
      opacity: 0.75;
    }

    .display {
      width: 100%;
      max-width: 260px;
      margin: 0 auto 14px;
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.15);
      background: rgba(6, 9, 26, 0.96);
      font-size: 1.4rem;
      letter-spacing: 0.08em;
      text-align: center;
      min-height: 1.6em;
      box-sizing: border-box;
    }

    .display-placeholder {
      opacity: 0.4;
      font-size: 0.9rem;
    }

    .hint {
      font-size: 0.85rem;
      opacity: 0.8;
      margin-bottom: 14px;
      line-height: 1.4;
    }

    .keypad {
      display: grid;
      grid-template-columns: repeat(3, 72px);
      justify-content: center;
      gap: 10px;
      margin-top: 8px;
      transition: opacity 0.3s ease, filter 0.3s ease;
    }

    .card.calling .keypad,
    .card.calling .hint {
      opacity: 0.25;
      filter: blur(0.5px);
    }

    .key {
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.18);
      background: radial-gradient(circle at top, rgba(255,255,255,0.16), rgba(10,12,30,0.95));
      color: #f7f7ff;
      font-size: 1.3rem;
      padding: 12px 0;
      cursor: pointer;
      box-shadow: 0 10px 25px rgba(0,0,0,0.5);
    }

    .key:active {
      transform: scale(0.95);
      background: radial-gradient(circle at top, rgba(255,255,255,0.22), rgba(10,12,30,0.95));
    }

    .key-small {
      font-size: 0.9rem;
    }

    .call-btn {
      border: none;
      border-radius: 999px;
      padding: 12px 24px;
      font-size: 15px;
      cursor: pointer;
      margin-top: 18px;
      background: radial-gradient(circle at top, #6bffb5, #1bbf63);
      color: #04160c;
      font-weight: 700;
      box-shadow: 0 10px 30px rgba(0,0,0,0.7);
      transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease, opacity 0.3s ease;
    }

    .call-btn:active {
      transform: scale(0.96);
    }

    .card.calling .call-btn {
      background: radial-gradient(circle at top, #9cfed1, #33d07a);
      box-shadow: 0 14px 40px rgba(0,0,0,0.9);
      opacity: 0.9;
    }

    .status {
      font-size: 0.9rem;
      margin-top: 12px;
      min-height: 1.4em;
    }

    /* DEV-SKIP */
    #dev-skip {
      display: none;
      margin-top: 10px;
      background: rgba(255,255,255,0.15);
      color: #fff;
      font-size: 14px;
      border-radius: 999px;
      padding: 8px 16px;
      border: none;
      cursor: pointer;
    }

    /* kleine shake bij fout antwoord */
    .shake {
      animation: shake 0.25s ease-in-out;
    }

    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-4px); }
      50% { transform: translateX(4px); }
      75% { transform: translateX(-2px); }
      100% { transform: translateX(0); }
    }

    /* INTRO OVERLAY */
    .intro-overlay {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at top, rgba(255,255,255,0.06), transparent 55%), #050814;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }

    .intro-box {
      max-width: 420px;
      padding: 28px 24px 24px;
      border-radius: 24px;
      background: rgba(5, 7, 18, 0.96);
      box-shadow: 0 20px 60px rgba(0,0,0,0.8);
      text-align: center;
      backdrop-filter: blur(14px);
    }

    .intro-text {
      font-size: 1.9rem;
      line-height: 1.45;
      font-weight: 500;
      margin: 0;
      opacity: 0;
    }

    .intro-text.fade-in {
      animation: introFade 0.8s ease forwards;
    }

    @keyframes introFade {
      from {
        opacity: 0;
        transform: translateY(6px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* FADE-OUT VAN DE HELE PAGINA AAN HET EIND */
    .fade-out {
      animation: fadeOutScreen 1.4s ease forwards;
    }

    @keyframes fadeOutScreen {
      0% {
        opacity: 1;
        transform: scale(1);
      }
      100% {
        opacity: 0;
        transform: scale(0.97);
      }
    }
  </style>
</head>
<body>

  <!-- INTRO OVERLAY -->
  <div class="intro-overlay" id="intro-overlay">
    <div class="intro-box">
      <p id="intro-text" class="intro-text"></p>
    </div>
  </div>

  <div class="wrapper">
    <div class="card" id="card">

      <div id="header" class="header">Telefoon</div>

      <div class="contact-header" id="contact-header">
        <div class="contact-avatar">E</div>
        <div class="contact-meta">
          <div class="contact-name">Emi</div>
          <div class="contact-sub">mobiel • favoriet</div>
        </div>
      </div>

      <div id="display" class="display">
        <span id="display-placeholder" class="display-placeholder"></span>
      </div>

      <p class="hint">
        Typ het totaal in minuten in.
      </p>

      <div class="keypad" id="keypad">
        <button class="key" data-digit="1">1</button>
        <button class="key" data-digit="2">2</button>
        <button class="key" data-digit="3">3</button>

        <button class="key" data-digit="4">4</button>
        <button class="key" data-digit="5">5</button>
        <button class="key" data-digit="6">6</button>

        <button class="key" data-digit="7">7</button>
        <button class="key" data-digit="8">8</button>
        <button class="key" data-digit="9">9</button>

        <button class="key key-small" data-action="clear">C</button>
        <button class="key" data-digit="0">0</button>
        <button class="key key-small" data-action="back">⌫</button>
      </div>

      <button id="call-btn" class="call-btn">Bel</button>

      <p id="status" class="status"></p>

      <button id="dev-skip">DEV: Skip naar volgende</button>
    </div>
  </div>

<script>
  // ====== CONFIG ======
  const CORRECT_MINUTES = 1207;
  const NEXT_URL = "puzzel.html"; // <-- pas aan naar jouw volgende pagina

  // ====== ELEMENTEN ======
  const cardEl = document.getElementById("card");
  const headerEl = document.getElementById("header");
  const statusEl = document.getElementById("status");
  const callBtn = document.getElementById("call-btn");
  const devSkipBtn = document.getElementById("dev-skip");
  const display = document.getElementById("display");
  const displayPlaceholder = document.getElementById("display-placeholder");
  const keys = document.querySelectorAll(".key");
  const wrapper = document.querySelector(".wrapper");
  const contactHeader = document.getElementById("contact-header");

  const introOverlay = document.getElementById("intro-overlay");
  const introTextEl  = document.getElementById("intro-text");

  let currentInput = "";
  let callAnimInterval = null;

  /* ===== INTRO SEQUENCE ===== */
  const introMessages = [
    "Hoi Hiep",
    "Dit was ons hele gesprek",
    "Voordat we elkaar voor het eerst zagen",
    "En nu",
    "100 dagen later",
    "Nog steeds net zo veel geyap",
    "Hopelijk is dit pas het begin",
    "En blijven we yappen tot in de oneindigheid",
    "Maar...",
    "Hoeveel hebben we eigenlijk gebeld?",
  ];

  function runIntro() {
    let idx = 0;
    const DISPLAY_TIME = 3400;

    function nextMessage() {
      if (idx >= introMessages.length) {
        introOverlay.style.transition = "opacity 0.45s ease";
        introOverlay.style.opacity = "0";
        setTimeout(() => {
          introOverlay.style.display = "none";
          wrapper.style.opacity = "1";
          wrapper.style.transform = "translateY(0)";
        }, 450);
        return;
      }

      introTextEl.classList.remove("fade-in");
      void introTextEl.offsetWidth;
      introTextEl.textContent = introMessages[idx];
      introTextEl.classList.add("fade-in");

      idx++;
      setTimeout(nextMessage, DISPLAY_TIME);
    }

    nextMessage();
  }

  window.addEventListener("load", runIntro);

  /* ===== DISPLAY ===== */
  function updateDisplay() {
    displayPlaceholder.style.display = currentInput ? "none" : "inline";
    Array.from(display.childNodes).forEach(node => {
      if (node !== displayPlaceholder) display.removeChild(node);
    });
    if (currentInput) {
      const span = document.createElement("span");
      span.textContent = currentInput;
      display.appendChild(span);
    }
  }

  function shakeDisplay() {
    display.classList.remove("shake");
    void display.offsetWidth;
    display.classList.add("shake");
  }

  // ====== KEYPAD LOGICA ======
  keys.forEach(key => {
    key.addEventListener("click", () => {
      const digit = key.getAttribute("data-digit");
      const action = key.getAttribute("data-action");

      if (digit !== null) {
        if (currentInput.length < 6) {
          if (currentInput === "0") {
            currentInput = digit;
          } else {
            currentInput += digit;
          }
        }
      } else if (action === "back") {
        currentInput = currentInput.slice(0, -1);
      } else if (action === "clear") {
        currentInput = "";
      }

      updateDisplay();
    });
  });

  function startCallAnimation() {
    cardEl.classList.add("calling");
    if (headerEl) headerEl.textContent = "Bellen…";
    callBtn.textContent = "In gesprek…";

    let dots = 0;
    statusEl.textContent = "Verbinden met Emi";

    callAnimInterval = setInterval(() => {
      dots = (dots + 1) % 4;
      statusEl.textContent = "Verbinden met Emi" + ".".repeat(dots);
    }, 500);
  }

  function stopCallAnimation() {
    if (callAnimInterval) {
      clearInterval(callAnimInterval);
      callAnimInterval = null;
    }
  }

  // ====== CHECK ANTWOORD ======
  callBtn.addEventListener("click", () => {
    if (!currentInput) {
      statusEl.textContent = "Je hebt nog niets ingevuld.";
      shakeDisplay();
      return;
    }

    const val = parseInt(currentInput, 10);
    if (isNaN(val)) {
      statusEl.textContent = "Dit lijkt geen geldig getal.";
      shakeDisplay();
      return;
    }

    if (val === CORRECT_MINUTES) {
      callBtn.disabled = true;
      keys.forEach(k => k.disabled = true);

      startCallAnimation();

      // Eerst 4s "bellen", daarna fade-out + redirect
      setTimeout(() => {
        stopCallAnimation();
        wrapper.classList.add("fade-out");

        // fade duurt 1.4s → daarna nog 1s extra zwart
        setTimeout(() => {
          window.location.href = NEXT_URL;
        }, 1400 + 1000);

      }, 4000);
    } else {
      if (val < CORRECT_MINUTES) {
        statusEl.textContent = "Het is hoger.";
      } else {
        statusEl.textContent = "Het is lager.";
      }
      shakeDisplay();
    }
  });

  // ====== DEV MODE (triple tap op contact-header) ======
  let taps = [];
  contactHeader.addEventListener("click", () => {
    const now = Date.now();
    taps.push(now);
    if (taps.length > 3) taps.shift();

    if (taps.length === 3 && taps[2] - taps[0] < 900) {
      devSkipBtn.style.display = "inline-block";
      statusEl.textContent = "(DEV-modus actief)";
    }
  });

  devSkipBtn.addEventListener("click", () => {
    stopCallAnimation();
    window.location.href = NEXT_URL;
  });

  // init display
  updateDisplay();
</script>

</body>
</html>
